<?xml version="1.0" ?>

<!--
   This is the components definition for the asm71 package:
   - package files
   - modification of PATH variable
-->

<Wix xmlns="http://wixtoolset.org/schemas/v4/wxs" xmlns:ui="http://wixtoolset.org/schemas/v4/wxs/ui">
<?include package.wxi ?>

  <Fragment>
     <!-- 
        All components of this installer are combinet in the component group "Components". You cannot select
        or deselect single components
     -->
     <ComponentGroup Id="Components" Directory="INSTALLDIR"> 
  
        <!--
           This is the most important innovation in wix: simply harvest a directory to include all files
        -->
        <Files Include="$(env.Staging)/**" />

        <!--
           Modify the Path Variable. We have to check the ALLUSERS property here to determine if we set 
           a system or a local user environment variable.
        -->
        <Component Id="EnvGlobal" Condition="ALLUSERS" Guid="$(var.EnvGlobalGuid)">
           <Environment Id="Environment0" Name="PATH" Part="last" System="yes" Action="set" Value="[INSTALLDIR]"/>
        </Component>
        <Component Id="EnvLocal" Condition="NOT ALLUSERS" Guid="$(var.EnvLocalGuid)">
           <Environment Id="Environment1" Name="PATH" Part="last" System="no" Action="set" Value="[INSTALLDIR]"/>
        </Component>
     </ComponentGroup>
   </Fragment>
</Wix>
